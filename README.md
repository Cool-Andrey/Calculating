# Calculating
Сервис подсчёта арифметических выражений

Считает выражения, преобразовывая их в постфиксную запись. Алгоритм преобразования и подсчёта выражений можете найти на википедии. Ничего мудреного здесь нет

Получает на вход json вида {"expression" : "ваше выражение"}. Само выражение записывается как обычно, можно ставить пробелы и тд. Но! 
1. Не забывайте знак умножения 
2. Хоть выражение и преобразовывается, запись должна быть как на письме! Т.е. 2 2 * он не примет.

На выход тоже json вида {"result" : "число с плавающей точкой"} либо {"error" : "текст ошибки"}

Код 200 - всё хорошо и выражение посчиталось

Код 422 - ошибка в записи

Код 500 - ошибка в форматировании json'а или неизвестная ошибка при счёте выражения

Пример обращения через curl:

curl --location 'http://127.0.0.1:8080/api/v1/calculate' --header 'Content-Type: application/json' --data '{"expression": "2+2*2"}'

Ответ будет таким:{"result":"14.00"} и код 200

Если выражение будет с ошибкой:

curl --location 'http://127.0.0.1:8080/api/v1/calculate' --header 'Content-Type: application/json' --data '{"expression": "2++2*2"}'

Ответ будет таким:{"error":"Товарищ пользователь! Проверьте количество операндов(+,-,/,*), их порядок и проверьте что нет буков"} и код 422

Код 500 может быть вызван в двух случаях - ошибка чтения запроса(некоректный формат запроса) или неизвестная ошибка счёта. В таком случае ответом будет {"error":"Что-то пошло не так"}, а в консоли будет более подробная информация. Пример:

curl --location 'http://127.0.0.1:8080/api/v1/calculate' --header 'Content-Type: application/json' --data '{"expression" :}'. 

В данном случае будет ошибка преобразования json'а. В ответ получим {"error":"Что-то пошло не так"} и код 500. В консоли будет следующее сообщение:

2024/12/17 21:34:04 Ошибка чтения json: invalid character '}' looking for beginning of value.

Сам по себе сервер логирует:
1. Порт, на котором прослушивается (единоразово при запуске напишет)
2. Прочитанные данные
3. Выходные данные(либо результат счёта, либо ошибку)

Запуск проекта. 

Проект берёт значение переменной среды PORT как порт, на котором будет работать сервер. Его можно как указывать, так и нет. Если не будете указывать, порт будет стандартным - 8080. На нём и написаны curl'ы

Как указать это значение?

Linux/Macos

В консоли пишем export PORT=нужный вам порт. Например export PORT=4567

Windows:

Powershell(или консоль Goland, если пользуетесь им)

\$env:PORT=нужный вам порт. Например $env:PORT=7865

Cmd:

set PORT=нужный вам порт. Например set PORT=5012

*Примечание: при запуске сервер напишет на котором порту прослушивается*


Сам запуск прост. Переходим в директорию с проектом(не заходим в папку pkg!) и вводим:

go run ./pkg/cmd/main.go

Всё. Для завершения работы сервера нажмите ctrl + c