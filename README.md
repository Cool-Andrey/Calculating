# Calculating
Сервис подсчёта арифметических выражений

Считает выражения, преобразовывая их в постфиксную запись. Алгоритм преобразования и подсчёта выражений можете найти на википедии. Ничего мудреного здесь нет

Получает на вход json вида {"expression" : "ваше выражение"}. Само выражение записывается как обычно, можно ставить пробелы и тд. Но! 
1. Не забывайте знак умножения 
2. Хоть выражение и преобразовывается, запись должна быть как на письме! Т.е. 2 2 * он не примет.

На выход тоже json вида {"result" : "число с плавающей точкой"} либо {"error" : "текст ошибки"}

| Код | Что произошло                        |
|-----|--------------------------------------|
| 200 | Всё хорошо и выражение посчиталось   |
| 422 | Ошибка в записи json'а или выражения |
| 500 | Неизвестная ошибка при счёте         |


Пример обращения через curl:

```
curl --location 'http://127.0.0.1:8080/api/v1/calculate' --header 'Content-Type: application/json' --data '{"expression": "2+2*2"}'
```
Ответ будет таким: {"result":"14.00"} и код 200

Если выражение будет с ошибкой:

```
curl --location 'http://127.0.0.1:8080/api/v1/calculate' --header 'Content-Type: application/json' --data '{"expression": "2++2*2"}'
```
Ответ будет таким: {"error":"Товарищ пользователь! Проверьте количество операндов(+,-,/,*), их порядок и проверьте что нет буков"} и код 422

Ещё пример с ошибкой:

```
curl --location 'http://127.0.0.1:8080/api/v1/calculate' --header 'Content-Type: application/json' --data '{"expression": ""}'
```
Ответ будет таким: {"error":"Пустое выражение!"} и код 422

Сам по себе сервер логирует:
1. Порт, на котором прослушивается (единоразово при запуске напишет)
2. Прочитанные данные
3. Выходные данные(либо результат счёта, либо ошибку)

Запуск проекта. 

Проект берёт значение переменной среды PORT как порт, на котором будет работать сервер. Его можно как указывать, так и нет. Если не будете указывать, порт будет стандартным - 8080. На нём и написаны curl'ы

Как указать это значение?

Linux/Macos

В консоли пишем
```
export PORT=нужный вам порт.
``` 

Например 
```Console
export PORT=4567
```

Windows:

Powershell(или консоль Goland, если пользуетесь им)
```PowerShell
$env:PORT=нужный вам порт. 
```
Например 
```PowerShell
$env:PORT=7865
```
Cmd:
```Cmd
set PORT=нужный вам порт. 
```
Например
```Cmd
set PORT=5012
```
*Примечание: при запуске сервер напишет на котором порту прослушивается*


Сам запуск прост. Переходим в директорию с проектом(не заходим в папку pkg!) и вводим:
```Console
go run ./pkg/cmd/main.go
```
Всё. Для завершения работы сервера нажмите ctrl + c